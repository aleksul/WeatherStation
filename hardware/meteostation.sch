EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 5
Title "Meteostation"
Date "2021-02-17"
Rev ""
Comp "Technospark"
Comment1 ""
Comment2 "Aleksul"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Device:C C?
U 1 1 6032A8FA
P 9300 2200
F 0 "C?" H 9415 2246 50  0000 L CNN
F 1 "100nF" H 9415 2155 50  0000 L CNN
F 2 "" H 9338 2050 50  0001 C CNN
F 3 "~" H 9300 2200 50  0001 C CNN
	1    9300 2200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0103
U 1 1 6032C2F4
P 9300 2450
F 0 "#PWR0103" H 9300 2200 50  0001 C CNN
F 1 "GND" H 9305 2277 50  0000 C CNN
F 2 "" H 9300 2450 50  0001 C CNN
F 3 "" H 9300 2450 50  0001 C CNN
	1    9300 2450
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 60328012
P 8800 2200
F 0 "C?" H 8915 2246 50  0000 L CNN
F 1 "100nF" H 8915 2155 50  0000 L CNN
F 2 "" H 8838 2050 50  0001 C CNN
F 3 "~" H 8800 2200 50  0001 C CNN
	1    8800 2200
	1    0    0    -1  
$EndComp
$Comp
L Switch:SW_MEC_5G SW?
U 1 1 6035A760
P 5750 2750
F 0 "SW?" H 5750 3035 50  0000 C CNN
F 1 "RESET_BTN" H 5800 2950 50  0000 C CNN
F 2 "" H 5750 2950 50  0001 C CNN
F 3 "http://www.apem.com/int/index.php?controller=attachment&id_attachment=488" H 5750 2950 50  0001 C CNN
	1    5750 2750
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 60360E03
P 5750 3050
F 0 "C?" V 5498 3050 50  0000 C CNN
F 1 "100nF" V 5589 3050 50  0000 C CNN
F 2 "" H 5788 2900 50  0001 C CNN
F 3 "~" H 5750 3050 50  0001 C CNN
	1    5750 3050
	0    1    1    0   
$EndComp
Wire Wire Line
	6050 2750 6050 2900
$Comp
L power:GND #PWR0107
U 1 1 603644F2
P 5450 3150
F 0 "#PWR0107" H 5450 2900 50  0001 C CNN
F 1 "GND" H 5455 2977 50  0000 C CNN
F 2 "" H 5450 3150 50  0001 C CNN
F 3 "" H 5450 3150 50  0001 C CNN
	1    5450 3150
	1    0    0    -1  
$EndComp
Text Label 6550 2900 0    50   ~ 0
RESET
$Sheet
S 1850 2850 1100 550 
U 60322A2E
F0 "ESP8266" 50
F1 "esp8266.sch" 50
F2 "CHIP_DISABLE" I L 1850 3250 50 
F3 "TX" O L 1850 2950 50 
F4 "RX" I L 1850 3050 50 
F5 "MISO" O R 2950 3050 50 
F6 "CLK" I R 2950 3150 50 
F7 "CS" I R 2950 3250 50 
F8 "MOSI" I R 2950 2950 50 
$EndSheet
$Comp
L power:+3.3V #PWR0102
U 1 1 603A52DC
P 9300 1950
F 0 "#PWR0102" H 9300 1800 50  0001 C CNN
F 1 "+3.3V" H 9315 2123 50  0000 C CNN
F 2 "" H 9300 1950 50  0001 C CNN
F 3 "" H 9300 1950 50  0001 C CNN
	1    9300 1950
	1    0    0    -1  
$EndComp
$Comp
L MCU_ST_STM32L4:STM32L432KBUx U?
U 1 1 604F928D
P 7750 3600
F 0 "U?" H 7400 4500 50  0000 C CNN
F 1 "STM32L432KBUx" H 8250 2600 50  0000 C CNN
F 2 "Package_DFN_QFN:QFN-32-1EP_5x5mm_P0.5mm_EP3.45x3.45mm" H 7350 2700 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00257205.pdf" H 7750 3600 50  0001 C CNN
	1    7750 3600
	1    0    0    -1  
$EndComp
$Sheet
S 1500 4150 1450 850 
U 603656E0
F0 "Power and USB" 50
F1 "power_and_usb.sch" 50
F2 "BQ25895_INT" I L 1500 4500 50 
F3 "BQ25895_SCL" B L 1500 4400 50 
F4 "BQ25895_SDA" B L 1500 4300 50 
F5 "ChargeEnable" I L 1500 4600 50 
F6 "USB_D+" B R 2950 4750 50 
F7 "USB_D-" B R 2950 4850 50 
F8 "FUSB302_INT" I R 2950 4500 50 
F9 "FUSB302_SCL" B R 2950 4400 50 
F10 "FUSB302_SDA" B R 2950 4300 50 
$EndSheet
$Sheet
S 2350 1700 600  500 
U 607D8CCB
F0 "SX1278" 50
F1 "sx1278.sch" 50
F2 "MISO" O R 2950 1900 50 
F3 "CLK" I R 2950 2000 50 
F4 "CS" I R 2950 2100 50 
F5 "MOSI" I R 2950 1800 50 
$EndSheet
$Sheet
S 1500 5950 1500 1450
U 607D914A
F0 "Sensors" 50
F1 "sensors.sch" 50
F2 "EN_5V_DCDC" I L 1500 7100 50 
F3 "PM_RX" I R 3000 6200 50 
F4 "PM_TX" O R 3000 6100 50 
F5 "PM_SET" I R 3000 6300 50 
F6 "PM_RESET" I R 3000 6400 50 
F7 "DHT11" B R 3000 6700 50 
F8 "MQ2" O R 3000 6850 50 
F9 "MQ2_Heat_Control" I L 1500 7250 50 
F10 "HP203B_SCL" B R 3000 7000 50 
F11 "HP203B_SDA" B R 3000 7100 50 
F12 "Anemometer" O R 3000 6550 50 
$EndSheet
NoConn ~ 1500 4600
NoConn ~ 3000 6300
NoConn ~ 3000 6400
Text Label 8250 3800 0    50   ~ 0
SCL
Text Label 8250 3900 0    50   ~ 0
SDA
Text Label 3000 7000 0    50   ~ 0
SCL
Text Label 3000 7100 0    50   ~ 0
SDA
Text Label 2950 4400 0    50   ~ 0
SCL
Text Label 2950 4300 0    50   ~ 0
SDA
Text Label 1500 4400 2    50   ~ 0
SCL
Text Label 1500 4300 2    50   ~ 0
SDA
Text Label 8250 4100 0    50   ~ 0
USB_DP
Text Label 8250 4000 0    50   ~ 0
USB_DM
Text Label 2950 4750 0    50   ~ 0
USB_DP
Text Label 2950 4850 0    50   ~ 0
USB_DM
Text Label 8250 3100 0    50   ~ 0
STM_TX1
Text Label 1200 3050 2    50   ~ 0
STM_TX1
Text Label 8250 3200 0    50   ~ 0
STM_RX1
$Comp
L Device:R R?
U 1 1 6065CC0F
P 1350 3050
AR Path="/60322A2E/6065CC0F" Ref="R?"  Part="1" 
AR Path="/6065CC0F" Ref="R?"  Part="1" 
F 0 "R?" V 1143 3050 50  0000 C CNN
F 1 "100R" V 1234 3050 50  0000 C CNN
F 2 "" V 1280 3050 50  0001 C CNN
F 3 "~" H 1350 3050 50  0001 C CNN
	1    1350 3050
	0    1    1    0   
$EndComp
Wire Wire Line
	1500 3050 1850 3050
Text Label 1850 2950 2    50   ~ 0
STM_RX1
Text Label 7250 4300 2    50   ~ 0
STM_TX2
Text Label 7250 4400 2    50   ~ 0
STM_RX2
Text Label 3700 6200 0    50   ~ 0
STM_TX2
$Comp
L Device:R R?
U 1 1 60660547
P 3550 6200
AR Path="/60322A2E/60660547" Ref="R?"  Part="1" 
AR Path="/60660547" Ref="R?"  Part="1" 
F 0 "R?" V 3343 6200 50  0000 C CNN
F 1 "100R" V 3434 6200 50  0000 C CNN
F 2 "" V 3480 6200 50  0001 C CNN
F 3 "~" H 3550 6200 50  0001 C CNN
	1    3550 6200
	0    1    1    0   
$EndComp
Text Label 3000 6100 0    50   ~ 0
STM_RX2
Wire Wire Line
	3000 6200 3400 6200
$Comp
L power:+3.3V #PWR?
U 1 1 60665343
P 7750 2550
F 0 "#PWR?" H 7750 2400 50  0001 C CNN
F 1 "+3.3V" H 7765 2723 50  0000 C CNN
F 2 "" H 7750 2550 50  0001 C CNN
F 3 "" H 7750 2550 50  0001 C CNN
	1    7750 2550
	1    0    0    -1  
$EndComp
Wire Wire Line
	7750 2550 7750 2700
Wire Wire Line
	7750 2700 7650 2700
Connection ~ 7750 2700
Wire Wire Line
	7750 2700 7850 2700
Wire Wire Line
	7650 4600 7750 4600
Connection ~ 7750 4600
Wire Wire Line
	7750 4600 7850 4600
$Comp
L power:GND #PWR?
U 1 1 60667B8E
P 7750 4600
F 0 "#PWR?" H 7750 4350 50  0001 C CNN
F 1 "GND" H 7755 4427 50  0000 C CNN
F 2 "" H 7750 4600 50  0001 C CNN
F 3 "" H 7750 4600 50  0001 C CNN
	1    7750 4600
	1    0    0    -1  
$EndComp
Text Label 8250 3000 0    50   ~ 0
STM_SCK
Text Label 8250 3500 0    50   ~ 0
STM_MISO
Text Label 7250 4200 2    50   ~ 0
STM_MOSI
Text Label 2950 3150 0    50   ~ 0
STM_SCK
Text Label 2950 3050 0    50   ~ 0
STM_MISO
Text Label 2950 2950 0    50   ~ 0
STM_MOSI
Text Label 2950 2000 0    50   ~ 0
STM_SCK
Text Label 2950 1900 0    50   ~ 0
STM_MISO
Text Label 2950 1800 0    50   ~ 0
STM_MOSI
$Comp
L Device:Crystal_GND24 Y?
U 1 1 60675C25
P 6200 3550
F 0 "Y?" V 6154 3794 50  0000 L CNN
F 1 "32.768KHz" V 6245 3794 50  0000 L CNN
F 2 "" H 6200 3550 50  0001 C CNN
F 3 "" H 6200 3550 50  0001 C CNN
	1    6200 3550
	0    1    1    0   
$EndComp
$Comp
L Device:C C?
U 1 1 6067D072
P 5650 3700
F 0 "C?" V 5500 3700 50  0000 C CNN
F 1 "TBD" V 5600 3850 50  0000 C CNN
F 2 "" H 5688 3550 50  0001 C CNN
F 3 "~" H 5650 3700 50  0001 C CNN
	1    5650 3700
	0    1    1    0   
$EndComp
$Comp
L Device:C C?
U 1 1 6067F831
P 5650 3400
F 0 "C?" V 5500 3400 50  0000 C CNN
F 1 "TBD" V 5600 3550 50  0000 C CNN
F 2 "" H 5688 3250 50  0001 C CNN
F 3 "~" H 5650 3400 50  0001 C CNN
	1    5650 3400
	0    1    1    0   
$EndComp
Wire Wire Line
	7250 3400 7250 3500
Wire Wire Line
	7250 3600 7250 3700
Wire Wire Line
	6200 3700 5800 3700
Connection ~ 6200 3700
Wire Wire Line
	6200 3400 5800 3400
Connection ~ 6200 3400
$Comp
L power:GND #PWR?
U 1 1 60683DA8
P 5500 3850
F 0 "#PWR?" H 5500 3600 50  0001 C CNN
F 1 "GND" H 5505 3677 50  0000 C CNN
F 2 "" H 5500 3850 50  0001 C CNN
F 3 "" H 5500 3850 50  0001 C CNN
	1    5500 3850
	1    0    0    -1  
$EndComp
Wire Wire Line
	5500 3850 5500 3700
Connection ~ 5500 3700
Wire Wire Line
	5500 3700 5500 3400
$Comp
L power:GND #PWR?
U 1 1 60685456
P 6200 3850
F 0 "#PWR?" H 6200 3600 50  0001 C CNN
F 1 "GND" H 6205 3677 50  0000 C CNN
F 2 "" H 6200 3850 50  0001 C CNN
F 3 "" H 6200 3850 50  0001 C CNN
	1    6200 3850
	1    0    0    -1  
$EndComp
Wire Wire Line
	6400 3550 6400 3850
Wire Wire Line
	6400 3850 6200 3850
Wire Wire Line
	6200 3850 6000 3850
Wire Wire Line
	6000 3850 6000 3550
Connection ~ 6200 3850
Wire Wire Line
	5950 2750 6050 2750
Wire Wire Line
	6050 3050 5900 3050
Wire Wire Line
	5600 3050 5450 3050
Wire Wire Line
	5450 3050 5450 3150
Wire Wire Line
	5450 3050 5450 2750
Wire Wire Line
	5450 2750 5550 2750
Connection ~ 5450 3050
$Comp
L Device:R R?
U 1 1 606B8930
P 6950 2750
F 0 "R?" H 7020 2796 50  0000 L CNN
F 1 "10K" H 7020 2705 50  0000 L CNN
F 2 "" V 6880 2750 50  0001 C CNN
F 3 "~" H 6950 2750 50  0001 C CNN
	1    6950 2750
	1    0    0    -1  
$EndComp
Wire Wire Line
	6950 2900 7250 2900
$Comp
L power:+3.3V #PWR?
U 1 1 606B9473
P 6950 2600
F 0 "#PWR?" H 6950 2450 50  0001 C CNN
F 1 "+3.3V" H 6965 2773 50  0000 C CNN
F 2 "" H 6950 2600 50  0001 C CNN
F 3 "" H 6950 2600 50  0001 C CNN
	1    6950 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	6050 2900 6950 2900
Connection ~ 6050 2900
Wire Wire Line
	6050 2900 6050 3050
Connection ~ 6950 2900
Wire Wire Line
	6200 3700 7250 3700
Wire Wire Line
	6200 3400 7250 3400
Text Label 8250 4300 0    50   ~ 0
SWCLK
Text Label 8250 4200 0    50   ~ 0
SWDIO
$Comp
L Connector:Conn_01x04_Male J?
U 1 1 606CCAFD
P 5150 5300
F 0 "J?" H 5100 5500 50  0000 C CNN
F 1 "PROG_Conn" H 5050 5050 50  0000 C CNN
F 2 "" H 5150 5300 50  0001 C CNN
F 3 "~" H 5150 5300 50  0001 C CNN
	1    5150 5300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 606CEFC8
P 5350 5500
F 0 "#PWR?" H 5350 5250 50  0001 C CNN
F 1 "GND" H 5355 5327 50  0000 C CNN
F 2 "" H 5350 5500 50  0001 C CNN
F 3 "" H 5350 5500 50  0001 C CNN
	1    5350 5500
	1    0    0    -1  
$EndComp
Text Label 5350 5400 0    50   ~ 0
RESET
Text Label 5350 5200 0    50   ~ 0
SWDIO
Text Label 5350 5300 0    50   ~ 0
SWCLK
$Comp
L Device:R R?
U 1 1 606D0212
P 6400 5350
F 0 "R?" H 6470 5396 50  0000 L CNN
F 1 "10K" H 6470 5305 50  0000 L CNN
F 2 "" V 6330 5350 50  0001 C CNN
F 3 "~" H 6400 5350 50  0001 C CNN
	1    6400 5350
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 606D3C7E
P 6400 5500
F 0 "#PWR?" H 6400 5250 50  0001 C CNN
F 1 "GND" H 6405 5327 50  0000 C CNN
F 2 "" H 6400 5500 50  0001 C CNN
F 3 "" H 6400 5500 50  0001 C CNN
	1    6400 5500
	1    0    0    -1  
$EndComp
Text Label 7250 3300 2    50   ~ 0
BOOT0
Text Label 6400 5200 2    50   ~ 0
BOOT0
Text Label 3000 6550 0    50   ~ 0
Anemometer
Text Label 8250 3300 0    50   ~ 0
Anemometer
Text Label 3000 6700 0    50   ~ 0
DHT11
Text Label 8250 3400 0    50   ~ 0
DHT11
Text Label 3000 6850 0    50   ~ 0
MQ2
Text Label 8250 3600 0    50   ~ 0
MQ2
Text Label 2950 3250 0    50   ~ 0
ESP_CS
Text Label 2950 2100 0    50   ~ 0
LoRa_CS
Text Label 7250 3800 2    50   ~ 0
LoRa_CS
Text Label 7250 3900 2    50   ~ 0
ESP_CS
Text Label 1850 3250 2    50   ~ 0
ESP_Disable
Text Label 8250 2900 0    50   ~ 0
ESP_Disable
Text Label 2950 4500 0    50   ~ 0
FUSB302_INT
Text Label 7250 4000 2    50   ~ 0
FUSB302_INT
Text Label 1500 4500 2    50   ~ 0
BQ25895_INT
Text Label 7250 4100 2    50   ~ 0
BQ25895_INT
$Comp
L Device:C C?
U 1 1 605E0A5B
P 9800 2200
F 0 "C?" H 9915 2246 50  0000 L CNN
F 1 "100nF" H 9915 2155 50  0000 L CNN
F 2 "" H 9838 2050 50  0001 C CNN
F 3 "~" H 9800 2200 50  0001 C CNN
	1    9800 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	8800 2050 9300 2050
Wire Wire Line
	8800 2350 9300 2350
Wire Wire Line
	9300 2350 9300 2450
Connection ~ 9300 2350
Wire Wire Line
	9300 2350 9800 2350
Wire Wire Line
	9300 2050 9300 1950
Connection ~ 9300 2050
Wire Wire Line
	9800 2050 9300 2050
Text Label 1500 7100 2    50   ~ 0
Enable_5V
Text Label 8250 3700 0    50   ~ 0
Enable_5V
Text Label 1500 7250 2    50   ~ 0
Enable_MQ2
Text Label 8250 4400 0    50   ~ 0
Enable_MQ2
$EndSCHEMATC
